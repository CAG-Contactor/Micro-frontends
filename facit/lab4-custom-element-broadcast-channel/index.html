<!DOCTYPE html>
<html lang="se">

  <head>
    <base href="/">
    <title>Labb 4 - Broadcast Channel</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600&display=swap"
          rel="stylesheet">
    <link href="style.css" rel="stylesheet">

    <script src="my-button.js"></script>
    <script src="my-card.js"></script>
    <script src="my-toast.js"></script>
  </head>

  <body>
    <main id="app">
      <h1>Exempel på Broadcast Channel</h1>
      <div class="mb-2">
        Här visas ett Custom Element som kommunicerar med Broadcast Channel.
        För mer info se: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API">Broadcast Channel API</a>
      </div>

      <my-button label="Klicka"></my-button>
      <my-card label="No clicks yet"></my-card>
      <my-toast></my-toast>
    </main>
    <script>
      const myButton = document.querySelector('my-button');
      const myCard = document.querySelector('my-card');
      // Koppla ihop event från my-button så att label-attribut på my-card uppdateras
      myButton.addEventListener('my-button:changed', (event) => {
        console.log('Got my-button:changed event', event);
        myCard.setAttribute('label', `Number of clicks: ${event.detail.count}`);
      })
      console.log("Started")
    </script>
  </body>

</html>
